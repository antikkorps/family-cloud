# ===========================================
# Configuration Nextcloud sur Hetzner VPS
# ===========================================
# Copiez ce fichier en .env et remplissez les valeurs
# cp .env.example .env
# chmod 600 .env  # IMPORTANT: Restreindre les permissions!

# ===========================================
# Domaine et SSL
# ===========================================
DOMAIN=nextcloud.mondomaine.com
ACME_EMAIL=admin@mondomaine.com

# ===========================================
# PostgreSQL
# ===========================================
POSTGRES_DB=nextcloud
POSTGRES_USER=nextcloud
# Générer avec: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGEZ_MOI_MOT_DE_PASSE_SECURISE

# ===========================================
# Redis
# ===========================================
# Générer avec: openssl rand -base64 32
REDIS_PASSWORD=CHANGEZ_MOI_MOT_DE_PASSE_REDIS

# ===========================================
# Nextcloud Admin
# ===========================================
NEXTCLOUD_ADMIN_USER=admin
# Générer avec: openssl rand -base64 24
NEXTCLOUD_ADMIN_PASSWORD=CHANGEZ_MOI_MOT_DE_PASSE_ADMIN

# ===========================================
# Cloudflare R2 (Backup avec Rclone)
# ===========================================
# Trouvez ces infos dans le dashboard Cloudflare R2
R2_ACCESS_KEY_ID=votre_access_key_id
R2_SECRET_ACCESS_KEY=votre_secret_access_key
R2_ENDPOINT=https://ACCOUNT_ID.r2.cloudflarestorage.com
R2_BUCKET_NAME=nextcloud-backup

# ===========================================
# Chiffrement des backups (optionnel)
# ===========================================
# Chiffrement côté client avec age (en plus du chiffrement R2 at-rest)
# Utile si vous ne faites pas confiance à Cloudflare ou voulez une protection
# supplémentaire en cas de fuite des credentials R2.
# Générer avec: openssl rand -base64 32
# Note: Conservez cette clé dans un password manager si vous l'activez.
# Laisser vide = pas de chiffrement côté client (R2 chiffre déjà au repos)
BACKUP_ENCRYPTION_KEY=

# ===========================================
# Chemins (ne pas modifier sauf nécessité)
# ===========================================
# Chemin du volume Hetzner monté
DATA_PATH=/mnt/nextcloud_data
# Chemin local pour les backups temporaires
BACKUP_PATH=/home/user/nextcloud/backups

# ===========================================
# Options avancées
# ===========================================
# Nombre de jours de rétention des backups
BACKUP_RETENTION_DAYS=30
# Timezone
TZ=Europe/Paris
